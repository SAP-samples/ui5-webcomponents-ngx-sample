<div *ngIf="isDataAvailable" style="height: 100%">
    <ui5-wizard id="wiz">
      <ui5-wizard-step icon="travel-itinerary" titleText="Travel Destination" selected>
        <div style="display: flex; gap: 2rem;" [ngStyle]="isMobile ? {'flex-direction': 'column'} : {'flex-direction': 'row'}">
            <div style="display: flex; flex-direction: column; gap: 1rem;">
            <ui5-title>1. Destination</ui5-title>
                <div>
                    <ui5-input #CountryInput placeholder="Enter a Country..." (ui5Input)="showSuggestions()" [(ngModel)]="countryInput"></ui5-input>
                    <ul fd-list>
                        <li fd-list-item *ngFor="let suggestion of suggestionItems" (click)="selectCountry(suggestion)">
                            {{suggestion}}
                        </li>
                    </ul>
                </div>
            </div>
            <fd-grid-list style="width: 100%;">
                @if (!this.countryInput) {
                    @for (item of CountryDetails | slice:0:(isMobile ? 3 : 8) ; track item) {
                        <fd-grid-list-item
                            [title]="item.name"
                            [description]="item.continent"
                        >
                        <fd-avatar fd-grid-list-item-image image={{item.flag}} size="s" [transparent]="true"></fd-avatar>
                        
                        <fd-grid-list-item-footer-bar> 
                          <ui5-button (ui5Click)="selectCountry(item.name)">Select</ui5-button>
                        </fd-grid-list-item-footer-bar>
                      
                      </fd-grid-list-item>
                    }
                } @else {
                    @for (item of CountryDetailsSuggested; track item) {
                        <fd-grid-list-item
                            [title]="item.name"
                            [description]="item.continent"
                        >
                        <fd-avatar fd-grid-list-item-image image={{item.flag}} size="s" [transparent]="true"></fd-avatar>
                        <fd-grid-list-item-footer-bar> 
                          <ui5-button (ui5Click)="selectCountry(item.name)">Select</ui5-button>
                        </fd-grid-list-item-footer-bar>
                        </fd-grid-list-item>
                    }
                }
                
            </fd-grid-list>
        </div>
      </ui5-wizard-step>
  
      <ui5-wizard-step icon="calendar" titleText="Vacation Days Picker">

        <div style="display: flex; gap: 3rem;" [ngStyle]="isMobile ? {'flex-direction': 'column'} : {'flex-direction': 'row'}">
            <div style="display: flex;flex-direction: column; gap: 1rem;">
              <ui5-title>2. Vacation Days</ui5-title>
              <ui5-daterange-picker style="position: relative; width: 50%; margin: auto;"></ui5-daterange-picker>
              <fd-calendar [rangeHoverEffect]="true" calType="range"  [(ngModel)]="rangeDate"></fd-calendar>
            </div>
            <ui5-list style="height: 400px;" selectionMode="Single" growing="Scroll" loading-delay="0" (ui5ItemClick)="changeDesiredPackage($event)" headerText="List of Available Package Deals">
                @for (package of randomPackageDeals; track $index) {
                  <ui5-li *ngIf="package.vacationStart.toDateString() != 'Invalid Date'" id="{{package.country}}_{{package.id}}" icon="paper-plane" description="{{package.vacationStart | dateTimeFormat}} - {{package.vacationEnd | dateTimeFormat }}" additionalText="{{package.price}}$"
                    additionalTextState="Positive">{{package.country}}</ui5-li>
                }
            </ui5-list>
          </div>
      </ui5-wizard-step>
  
      <ui5-wizard-step icon="information" titleText="Passengers & Final Price">
        <div style="display: flex; flex-direction: column;">
          <ui5-title>3. Passengers & Final Price</ui5-title>
          <br>

          <ui5-form headerText="Add New Passengers:">
            <ui5-form-item>
              <ui5-label for="nameInp" slot="labelContent">Full Name:</ui5-label>
              <ui5-input id="nameInp" [(ngModel)]="passengerToAddName"></ui5-input>
            </ui5-form-item>
            <ui5-form-item>
              <ui5-label for="addressInp" slot="labelContent">Address:</ui5-label>
              <ui5-input id="addressInp" [(ngModel)]="passengerToAddAddress"></ui5-input>
            </ui5-form-item>
            <ui5-form-item>
              <ui5-label for="passNumberInp" slot="labelContent">Passport Number:</ui5-label>
              <ui5-input id="passNumberInp" [(ngModel)]="passengerToAddPassNumber"></ui5-input>
            </ui5-form-item>
          </ui5-form>

          <button fd-button fdType="emphasized" type="submit" (click)="addPassenger()" style="width: 15%; margin: auto;">Add</button>

          <br>
          <ul fd-list>
            
            @for (item of listOfPassengers; track item; let index = $index) {
              <li fd-list-item>
                <span fd-list-title style="font-weight: 700;">{{item.name}} - <span>{{item.passportNumber}}</span> </span>
                <span fd-list-secondary>
                  <button ariaLabel="Remove" title="Remove" fd-button glyph="delete" (click)="removeItem(index)"></button>
                </span>
              </li>
            }

          </ul>
        </div>
        <br>
        <div *ngIf="packageSelected" style="display: flex; flex-direction: column; gap: 1rem;">
          <ui5-message-strip design="Information" [hideCloseButton]="true">Total Price: {{listOfPassengers.length * packageSelected.price}}$</ui5-message-strip>
          <ui5-button id="finalize" design="Emphasized" style="width: 10%;">Finalize</ui5-button>
        </div>
      </ui5-wizard-step>
    </ui5-wizard>
  </div>